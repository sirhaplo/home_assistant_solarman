# Renon Power IFLXX
#  tested on Renon Hybrid IFL6
#  should work also on Megarevo RXLNA 
requests:
  - start: 4660
    end: 4666
    mb_functioncode: 0x03
  - start: 5776
    end: 5795
    mb_functioncode: 0x03
  - start: 12606
    end: 12668
    mb_functioncode: 0x03

parameters:
  - group: solar
    items:
      - name: "PV1 Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 1
        rule: 1
        registers: [5795]
        icon: "mdi:solar-power"
      - name: "PV1 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [5776]
        icon: "mdi:solar-power"
      - name: "PV1 Current"
        class: "current"
        uom: "A"
        scale: 1
        rule: 1
        registers: [5777]
        icon: "mdi:solar-power"
      - name: "Total Production"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.001
        rule: 3
        registers: [12639,12640]
        icon: "mdi:solar-power"
      - name: "Daily Production"
        class: "energy"
        state_class: "measurement"
        uom: "kWh"
        scale: 0.001
        rule: 1
        registers: [12627]
        icon: "mdi:solar-power"

  - group: Load
    items:
      - name: "Daily Load Consumption"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.001
        rule: 1
        registers: [12631]
        icon: "mdi:lightning-bolt-outline"

      - name: "Total Load Consumption"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.001
        rule: 3
        registers: [12643]
        icon: "mdi:lightning-bolt-outline"
      
      - name: "Load L1 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [5790]
        icon: "mdi:lightning-bolt-outline"

      - name: "Load L1 Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [5789]
        icon: "mdi:lightning-bolt-outline"

  - group: Battery
    items: 
    - name: "Total Battery Charge"
      class: "energy"
      state_class: "total_increasing"      
      uom: "kWh"
      scale: 0.001
      rule: 3
      registers: [12665,12666]
      icon: 'mdi:battery-plus'

    - name: "Total Battery Discharge"
      class: "energy"
      state_class: "total_increasing"
      uom: "kWh"
      scale: 0.001
      rule: 3
      registers: [12667,12668]
      icon: 'mdi:battery-minus'

    - name: "Daily Battery Charge"
      class: "energy"
      state_class: "total_increasing"      
      uom: "kWh"
      scale: 0.001
      rule: 1
      registers: [12653,12654]
      icon: 'mdi:battery-plus'
      
    - name: "Daily Battery Discharge"
      class: "energy"
      state_class: "total_increasing"      
      uom: "kWh"
      scale: 0.001
      rule: 1
      registers: [12655,12656]
      icon: 'mdi:battery-minus'

  #   - name: "Battery Status"
  #     class: ""
  #     state_class: "measurement"
  #     uom: ""
  #     scale: 1
  #     rule: 1
  #     registers: [0x00BD]
  #     isstr: true
  #     lookup: 
  #     -  key: 0
  #        value: "Charge"
  #     -  key: 1
  #        value: "Stand-by"
  #     -  key: 2
  #        value: "Discharge"
  #     icon: 'mdi:battery'

    - name: "Battery Power"
      class: "power"
      state_class: "measurement"
      uom: "W"
      scale: 1
      rule: 2
      registers: [12618]
      icon: 'mdi:battery'

    - name: "Battery Voltage"
      class: "voltage"
      state_class: "measurement"
      uom: "V"
      scale: 0.1
      rule: 1
      registers: [12608]
      icon: 'mdi:battery'

    - name: "Battery SOC"
      class: "battery"
      state_class: "measurement"
      uom: "%"
      scale: 0.1
      rule: 1
      registers: [12613]
      icon: 'mdi:battery'

    - name: "Battery Current"
      class: "current"
      state_class: "measurement"
      uom: "A"
      scale: 0.01
      rule: 2
      registers: [12609]
      icon: 'mdi:battery'

    - name: "Battery Temperature"
      class: "temperature"
      state_class: "measurement"
      uom: "Â°C"
      scale: 0.1
      rule: 1      
      registers: [12614]
      icon: 'mdi:battery'

  - group: Grid
    items:
      # - name: "Total Grid Power"
      #   class: "power"
      #   state_class: "measurement"
      #   uom: "W"
      #   scale: 1
      #   rule: 2
      #   registers: [0x00A9]
      #   icon: 'mdi:transmission-tower'

      - name: "Grid Voltage L1"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [5784]
        icon: "mdi:transmission-tower"

      - name: "Grid Current L1"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [5785]
        icon: "mdi:current-ac"

  - group: Inverter
    items:
      - name: "Inverter ID"
        class: ""
        state_class: ""
        uom: ""
        scale: 1
        rule: 5
        registers: [4660, 4661, 4662, 4663, 4664, 4665]
        isstr: true
      
